{% extends "base.html" %}
{% load static %}
{% block title %}
Online Clothing Store
{% endblock %}

{% block headline %}
{% endblock %}

{% block content %}


<header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Online Clothing Store</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/store/cart">Cart</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/store/account">Account</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/store/contact">Contact</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


<main>
  <section class="jumbotron text-center">
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>

      <!-- Slides -->
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="https://cdn1.cybassets.com/media/W1siZiIsIjI0ODI5L2F0dGFjaGVkX3Bob3Rvcy8xNjg1Njc5MDAwX-acquWRveWQjeioreioiCAoMykucG5nLnBuZyJdXQ.png?sha=6706176251a26389"
            class="d-block w-100" alt="Slide 1">
        </div>
        <div class="carousel-item">
          <img
            src="https://cdn1.cybassets.com/media/W1siZiIsIjI0ODI5L2F0dGFjaGVkX3Bob3Rvcy8xNjgzODY3Nzg5X1llbGxvdyBDdXRlIFkySyBNb3RpdmF0aW9uYWwgV29tZW4ncyBEYXkgUGludGVyZXN0IFBpbi5qcGcuanBlZyJdXQ.jpeg?sha=b52d7ac076b3baf9"
            class="d-block w-100" alt="Slide 2">
        </div>
        <div class="carousel-item">
          <img
            src="https://cdn1.cybassets.com/media/W1siZiIsIjI0ODI5L2F0dGFjaGVkX3Bob3Rvcy8xNjg2Mjg5MDgxXzEuanBnLmpwZWciXV0.jpeg?sha=e013853fc35e2bfc"
            class="d-block w-100" alt="Slide 3">
        </div>
      </div>

      <!-- Controls -->
      <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    <!-- <h1 class="display-4">Welcome to our online store!</h1>
    <p class="lead">Explore our wide range of clothing options and find the perfect style for you.</p> -->
  </section>

  <section class="container">
    <h2 class="text-center">Featured Products</h2><br>
    <div class="row">
      <div class="col-md-3">
        <ul class="nav nav-pills flex-column" id="productTabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="tops-tab" data-toggle="pill" href="#tops" role="tab" aria-controls="tops"
              aria-selected="true">TOP</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="pants-tab" data-toggle="pill" href="#pants" role="tab" aria-controls="pants"
              aria-selected="false">BOTTOM</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="dresses-tab" data-toggle="pill" href="#dresses" role="tab" aria-controls="dresses"
              aria-selected="false">DRESS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="accessories-tab" data-toggle="pill" href="#accessories" role="tab"
              aria-controls="accessories" aria-selected="false">Accessories</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="all-tab" data-toggle="pill" href="#all" role="tab" aria-controls="all"
              aria-selected="false">All</a>
          </li>
        </ul>
      </div>

      <!-- Top -->
      <div class="col-md-9">
        <div class="tab-content" id="productTabsContent">
          <div class="tab-pane fade show active" id="tops" role="tabpanel" aria-labelledby="tops-tab">
            <div class="row">

              {% for p in myitems %}
              {% if p.category == "T" %}
              <div class="col-md-4">
                <div class="card mb-4">
                  <img src="/media/{{p.photo}}" class="card-img-top" alt="上衣">
                  <div class="card-body">
                    <h3 class="card-title">
                      <a href="details/{{p.category}}/{{p.id}}/">{{p.itemname}}</a>
                    </h3>
                    <!-- <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing
                      elit.</p> -->
                    <div class="form-row align-items-center">
                      <div class="col-auto my-1">
                        <label class="mr-sm-2" for="product1-price">NT
                          <span id="c_product1-price">${{p.price}}</span></label>
                      </div>
                      <div class="col-md-3">
                        <!-- <label class="mr-sm-2" for="product1-quantity">Quantity:</label>
                        <input type="number" class="form-control" id="product1-quantity" value="1"> -->
                      </div>
                      <div class="col-auto my-1">
                        <button type="button" class="my-btn add-to-cart-btn" data-product-id="{{p.category}}{{ p.id }}"
                          data-bs-toggle="modal" data-bs-target="#addToCartModal"
                          onclick="addToCart('{{p.category}}{{ p.id }}')">加入購物車</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}
              <!-- <script>// 获取加入购物车按钮
                function addToCart(productId) {
                  // 发送AJAX请求
                  $.ajax({
                    url: '/update_cart/',
                    type: 'POST',
                    data: {
                      product_id: productId,
                      csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success: function (response) {
                      if (response.success) {
                        // 添加成功的处理逻辑
                        alert('商品已添加到购物车！');
                      } else {
                        // 添加失败的处理逻辑
                        alert('添加到购物车失败！');
                      }
                    }
                  });
                }</script> -->


            </div>
          </div>

          <!-- bottom -->
          <div class="tab-pane fade" id="pants" role="tabpanel" aria-labelledby="pants-tab">
            <div class="row">

              {% for p in myitems %}

              {% if p.category == "B" %}
              <div class="col-md-4">
                <div class="card mb-4">
                  <img src="/media/{{p.photo}}" class="card-img-top" alt="下身">
                  <div class="card-body">
                    <h3 class="card-title"><a href="details/{{p.category}}/{{p.id}}/">{{p.itemname}}</a>
                    </h3>
                    <!-- <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing
                      elit.</p> -->
                    <div class="form-row align-items-center">
                      <div class="col-auto my-1">
                        <label class="mr-sm-2" for="product1-price">NT
                          <span id="p_product1-price">${{p.price}}</span></label>
                      </div>
                      <div class="col-md-3">
                        <!-- <label class="mr-sm-2" for="product1-quantity">Quantity:</label>
                        <input type="number" class="form-control" id="p_product1-quantity" value="1"> -->
                      </div>
                      <div class="col-auto my-1">
                        <button type="button" class="my-btn add-to-cart-btn" data-product-id="{{p.category}}{{ p.id }}"
                          data-bs-toggle="modal" data-bs-target="#addToCartModal">加入購物車</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}

            </div>
          </div>

          <!-- Dress -->
          <div class="tab-pane fade" id="dresses" role="tabpanel" aria-labelledby="dresses-tab">
            <div class="row">
              {% for p in myitems %}
              {% if p.category == "D" %}
              <div class="col-md-4">
                <div class="card mb-4">
                  <img src="/media/{{p.photo}}" class="card-img-top" alt="洋裝">
                  <div class="card-body">
                    <h3 class="card-title"><a href="details/{{p.category}}/{{p.id}}/">{{p.itemname}}</a>
                    </h3>
                    <!-- <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing
                      elit.</p> -->
                    <div class="form-row align-items-center">
                      <div class="col-auto my-1">
                        <label class="mr-sm-2" for="product1-price">NT
                          <span id="d_product1-price">${{p.price}}</span></label>
                      </div>
                      <div class="col-md-3">
                        <!-- <label class="mr-sm-2" for="product1-quantity">Quantity:</label>
                        <input type="number" class="form-control" id="d_product1-quantity" value="1"> -->
                      </div>
                      <div class="col-auto my-1">
                        <button type="button" class="my-btn add-to-cart-btn" data-product-id="{{p.category}}{{ p.id }}"
                          data-bs-toggle="modal" data-bs-target="#addToCartModal">加入購物車</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}

            </div>
          </div>

          <!-- Acc -->
          <div class="tab-pane fade" id="accessories" role="tabpanel" aria-labelledby="accessories-tab">
            <div class="row">
              {% for p in myitems %}
              {% if p.category == "A" %}
              <div class="col-md-4">
                <div class="card mb-4">
                  <img src="/media/{{p.photo}}" class="card-img-top" alt="配件">
                  <div class="card-body">
                    <h3 class="card-title"><a href="details/{{p.category}}/{{p.id}}/">{{p.itemname}}</a>
                    </h3>
                    <!-- <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing
                      elit.</p> -->
                    <div class="form-row align-items-center">
                      <div class="col-auto my-1">
                        <label class="mr-sm-2" for="product1-price">NT
                          <span id="a_product1-price">${{p.price}}</span></label>
                      </div>
                      <div class="col-md-3">
                        <!-- <label class="mr-sm-2" for="product1-quantity">Quantity:</label>
                        <input type="number" class="form-control" id="a_product1-quantity" value="1"> -->
                      </div>
                      <div class="col-auto my-1">
                        <button type="button" class="my-btn add-to-cart-btn" data-product-id="{{p.category}}{{ p.id }}"
                          data-bs-toggle="modal" data-bs-target="#addToCartModal">加入購物車</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}

            </div>
          </div>

          <div class="tab-pane fade" id="all" role="tabpanel" aria-labelledby="all-tab">
            <!-- 在頁面載入時複製其他選項卡的商品卡片並添加到 "All" 選項卡的內容區域 -->
          </div>
          <!-- The Modal -->
          <div class="modal fade" id="addToCartModal">
            <div class="modal-dialog">
              <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                  <h4 class="modal-title">Notify</h4>
                  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">添加商品成功！
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


  </section>




</main>

<footer class="text-center">
  <p>&copy; 2023 Online Clothing Store. </p>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- 在頁面載入時複製其他選項卡的商品卡片並添加到 "All" 選項卡的內容區域 -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const allTabContent = document.getElementById('all');
    const productCards = document.querySelectorAll('.tab-pane.fade:not(#all) .card');

    productCards.forEach(card => {
      const clonedCard = card.cloneNode(true);
      allTabContent.appendChild(clonedCard);
    });
  });
</script>

{% endblock %}